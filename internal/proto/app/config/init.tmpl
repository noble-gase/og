package config

import (
	"fmt"
	"path/filepath"

	"{{.Module}}/pkg/log"

	"github.com/spf13/viper"
)

// Init 初始化资源
func Init(cfgFile string) {
	// 初始化配置
	viper.SetConfigFile(filepath.Clean(cfgFile))
	if err := viper.ReadInConfig(); err != nil {
		panic(fmt.Errorf("config load failed: %w", err))
	}
	viper.WatchConfig()

	// 初始化日志
	log.Init()
	// TODO: 其它初始化操作，如：数据库等
	// db.Init()
}
